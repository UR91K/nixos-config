building the system configuration...
error:
       … while calling the 'head' builtin
         at /nix/store/8hx8jwa24q6rkzhca9iqy5ckk9rbphi1-source/lib/attrsets.nix:1713:13:
         1712|           if length values == 1 || pred here (elemAt values 1) (head values) then
         1713|             head values
             |             ^
         1714|           else

       … while evaluating the attribute 'value'
         at /nix/store/8hx8jwa24q6rkzhca9iqy5ckk9rbphi1-source/lib/modules.nix:1118:7:
         1117|     // {
         1118|       value = addErrorContext "while evaluating the option `${showOption loc}':" value;
             |       ^
         1119|       inherit (res.defsFinal') highestPrio;

       … while evaluating the option `system.build.toplevel':

       … while evaluating definitions from `/nix/store/8hx8jwa24q6rkzhca9iqy5ckk9rbphi1-source/nixos/modules/system/activation/top-level.nix':

       … while evaluating the option `home-manager.users.jude.home.file."/home/jude/.config/niri-config".enable':

       … while evaluating definitions from `/nix/store/agc0l7lkrkqzjv9v847rd0w057dl460s-source/modules/misc/xdg.nix':

       … while evaluating the option `home-manager.users.jude.xdg.configFile.niri-config.enable':

       … while evaluating definitions from `/nix/store/8ika5yk2n85a4kh3l3xkxaizvkg9wlda-source/configuration.nix':

       … while evaluating the option `home-manager.users.jude.programs.niri.finalConfig':

       … while evaluating the option `home-manager.users.jude.programs.niri.config."[definition 1-entry 5]".children."[definition 1-entry 1]".children':

       … while evaluating definitions from `/nix/store/8ika5yk2n85a4kh3l3xkxaizvkg9wlda-source/configuration.nix':

       … while evaluating the option `home-manager.users.jude.programs.niri.settings.binds."Mod+Q".action':

       … while evaluating definitions from `/nix/store/8ika5yk2n85a4kh3l3xkxaizvkg9wlda-source/home-manager/niri.nix':

       (stack trace truncated; use '--show-trace' to show the full, detailed trace)

       error: attribute 'lib' missing
       at /nix/store/8ika5yk2n85a4kh3l3xkxaizvkg9wlda-source/home-manager/niri.nix:27:20:
           26|       # Basic Keybindings
           27|       binds = with config.programs.niri.lib.actions; {
             |                    ^
           28|         "Mod+T".action = spawn [ "kitty" ];
Command 'nix --extra-experimental-features 'nix-command flakes' build --print-out-paths '.#nixosConfigurations."nixos".config.system.build.toplevel' --no-link' returned non-zero exit status 1.
